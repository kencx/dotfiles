#!/bin/bash

# generates dev env layout with nvim and tmux
# if session already exists, select session with fzf

function session-exists {
    tmux has-session -t "dev" 2> /dev/null
}

if session-exists ; then
    session=$(tmux list-sessions | \
        fzf --ansi --cycle \
        --reverse \
        --prompt="sessions > " \
    )

    session_name="$(echo "$session" | awk '{print $1}' | sed 's/://')"
    tmux attach-session -d -t "$session_name"
else
    tmux new-session -s "dev" -d "nvim"
    tmux split-window -h -l 30%
    tmux split-window -v
    tmux attach-session -d -t "dev"
fi
